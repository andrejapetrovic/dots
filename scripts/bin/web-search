#!/bin/sh
DIR="$HOME/Scripts"
HISTORY="$HOME/.cache/dmenu-web-history"
search() {

	[ -z $1 ] && exit;

	URL="$@"
	WS="$1"
	shift
	case $WS in
		#google
		"gg") LOC="https://www.google.com/search?q=$@&ie=UTF-8";;
		#reddit
		"r") LOC="https://www.reddit.com/r/$@";;
		#youtube
		"yt") LOC="https://www.youtube.com/results?search_query=$@";;
		#archwiki
		"aw") LOC="https://wiki.archlinux.org/index.php?search=$@&title=Special%3ASearch&go=Go";;
		#aur
		"aur") LOC="https://aur.archlinux.org/packages/?O=0&K=$@";;
		#localhost
		"loc") LOC="localhost:$@";;
		#moj github
		"git") LOC="https://www.github.com/andrejapetrovic/$@";;
		#fb
		"fb") LOC="https://www.facebook.com";;
		#gdrive
		"d1") LOC="https://drive.google.com/drive/my-drive";;
		#onedrive
		"d2") LOC="https://onedrive.live.com/?id=root&cid=3C111CCF104E908C";;
		#pcloud
		"c") LOC="https://my.pcloud.com/";;
		#protonmail
		"m") LOC="https://mail.protonmail.com/inbox";;
		*) exit;;
	esac
	sed -i '
	1i'"$URL"'
	/^'"$URL"'$/d' $HISTORY

	$BROWSER "$LOC"
}

(search $(bemenu -p "web")) < "$HISTORY"
